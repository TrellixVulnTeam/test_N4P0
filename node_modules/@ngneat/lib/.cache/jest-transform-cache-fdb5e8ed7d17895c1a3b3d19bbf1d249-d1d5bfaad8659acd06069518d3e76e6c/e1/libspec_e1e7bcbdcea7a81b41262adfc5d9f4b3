45eedc9a2ebc41616d06e022cd8fa92b
"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
const schematics_1 = require("@angular-devkit/schematics");
const testing_1 = require("@angular-devkit/schematics/testing");
const schema_1 = require("@schematics/angular/application/schema");
const path = require("path");
const collectionPath = path.join(__dirname, "../collection.json");
const schematicRunner = new testing_1.SchematicTestRunner("@ngneat/lib", require.resolve(collectionPath));
const workspaceOptions = {
    name: "workspace",
    newProjectRoot: "projects",
    version: "6.0.0",
};
const scopeWithName = "@scope/toaster";
const appOptions = {
    name: "bar",
    inlineStyle: false,
    inlineTemplate: false,
    routing: false,
    style: schema_1.Style.Css,
    skipTests: false,
    skipPackageJson: false,
};
const defaultOptions = {
    name: scopeWithName,
    ci: "github-actions",
    skipAngularCliGhPages: true,
    skipSpectator: true,
    skipSchematics: false,
    skipPrompts: true,
    importModule: true,
    importStatement: "ToastModule.forRoot()",
    packages: [],
};
const defaultCreateSchematicsOptions = {
    name: scopeWithName,
    skipPrompts: true,
    importModule: true,
    importStatement: "ToastModule.forRoot()",
    packages: [],
};
const schematicResultFiles = [
    "/projects/scope/toaster/tsconfig.schematics.json",
    "/projects/scope/toaster/schematics/collection.json",
    "/projects/scope/toaster/schematics/ng-add/index.ts",
    "/projects/scope/toaster/schematics/ng-add/schema.json",
    "/projects/scope/toaster/schematics/ng-add/schema.ts",
    "/projects/scope/toaster/schematics/ng-add/utils/index.ts",
    "/projects/scope/toaster/schematics/ng-add/utils/ng-module-imports.ts",
    "/projects/scope/toaster/schematics/ng-add/utils/project-main-file.ts",
    "/projects/scope/toaster/schematics/ng-add/utils/project-targets.ts",
];
const libWOSchematicsResultFiles = [
    "/projects/scope/toaster/karma.conf.js",
    "/projects/scope/toaster/ng-package.json",
    "/projects/scope/toaster/package.json",
    "/projects/scope/toaster/README.md",
    "/projects/scope/toaster/tsconfig.lib.json",
    "/projects/scope/toaster/tsconfig.lib.prod.json",
    "/projects/scope/toaster/tsconfig.spec.json",
    "/projects/scope/toaster/src/test.ts",
    "/projects/scope/toaster/src/public-api.ts",
    "/projects/scope/toaster/src/lib/toaster.module.ts",
    "/.all-contributorsrc",
    "/.prettierrc.json",
    "/.releaserc.json",
    "/CODE_OF_CONDUCT.md",
    "/commitlint.config.js",
    "/CONTRIBUTING.md",
    "/.github/ISSUE_TEMPLATE.md",
    "/LICENSE",
    "/logo.svg",
    "/.github/PULL_REQUEST_TEMPLATE.md",
    "/hooks/pre-commit.js",
    "/.github/workflows/release.yml",
    "/.github/workflows/deploy.yml",
];
const resultFiles = [...libWOSchematicsResultFiles, ...schematicResultFiles];
describe("ng-add", () => {
    describe("with project", () => {
        let appTree;
        beforeEach(() => __awaiter(void 0, void 0, void 0, function* () {
            appTree = yield schematicRunner
                .runExternalSchematicAsync("@schematics/angular", "workspace", workspaceOptions)
                .toPromise();
            appTree = yield schematicRunner
                .runExternalSchematicAsync("@schematics/angular", "application", appOptions, appTree)
                .toPromise();
        }));
        it("works", () => __awaiter(void 0, void 0, void 0, function* () {
            const options = Object.assign({}, defaultOptions);
            const tree = yield schematicRunner
                .runSchematicAsync("ng-add", options, appTree)
                .toPromise();
            expect(tree.files).toEqual(expect.arrayContaining(resultFiles));
        }));
        it("works with skipLib=true for existing created lib", () => __awaiter(void 0, void 0, void 0, function* () {
            const appTreeWithLib = yield schematicRunner
                .runExternalSchematicAsync("@schematics/angular", "library", { name: scopeWithName }, appTree)
                .toPromise();
            const options = Object.assign(Object.assign({}, defaultOptions), { skipLib: true });
            const tree = yield schematicRunner
                .runSchematicAsync("ng-add", options, appTreeWithLib)
                .toPromise();
            expect(tree.files).toEqual(expect.arrayContaining(resultFiles));
        }));
        it("works with skipSchematics=true", () => __awaiter(void 0, void 0, void 0, function* () {
            const options = Object.assign(Object.assign({}, defaultOptions), { skipSchematics: true });
            const tree = yield schematicRunner
                .runSchematicAsync("ng-add", options, appTree)
                .toPromise();
            expect(tree.files).toEqual(expect.arrayContaining(libWOSchematicsResultFiles));
            expect(tree.files).not.toEqual(expect.arrayContaining(schematicResultFiles));
        }));
        it("fails with missing tree", (done) => {
            schematicRunner
                .runSchematicAsync("ng-add", {
                name: "test",
            }, schematics_1.Tree.empty())
                .subscribe({
                error: (err) => {
                    expect(err).toBeTruthy();
                    done();
                },
            });
        });
        it("fails with missing params: name", (done) => {
            schematicRunner.runSchematicAsync("ng-add", {}, appTree).subscribe({
                error: (err) => {
                    expect(err).toBeTruthy();
                    done();
                },
            });
        });
        it("fails with skipLib=true for missing lib", (done) => {
            const options = Object.assign(Object.assign({}, defaultOptions), { skipLib: true });
            schematicRunner.runSchematicAsync("ng-add", options, appTree).subscribe({
                error: (err) => {
                    expect(err).toBeTruthy();
                    done();
                },
            });
        });
    });
});
describe("ng-generate:create-schematics", () => {
    describe("with project", () => {
        let appTree;
        beforeEach(() => __awaiter(void 0, void 0, void 0, function* () {
            appTree = yield schematicRunner
                .runExternalSchematicAsync("@schematics/angular", "workspace", workspaceOptions)
                .toPromise();
            appTree = yield schematicRunner
                .runExternalSchematicAsync("@schematics/angular", "application", appOptions, appTree)
                .toPromise();
            appTree = yield schematicRunner
                .runExternalSchematicAsync("@schematics/angular", "library", { name: scopeWithName }, appTree)
                .toPromise();
        }));
        it("works", () => __awaiter(void 0, void 0, void 0, function* () {
            const options = Object.assign({}, defaultCreateSchematicsOptions);
            const tree = yield schematicRunner
                .runSchematicAsync("create-schematics", options, appTree)
                .toPromise();
            expect(tree.files).toEqual(expect.arrayContaining(schematicResultFiles));
        }));
        it("fails with missing tree", (done) => {
            const options = Object.assign({}, defaultCreateSchematicsOptions);
            schematicRunner
                .runSchematicAsync("create-schematics", options, schematics_1.Tree.empty())
                .subscribe({
                error: (err) => {
                    expect(err).toBeTruthy();
                    done();
                },
            });
        });
        it("fails with missing params: name", (done) => {
            schematicRunner
                .runSchematicAsync("create-schematics", {}, appTree)
                .subscribe({
                error: (err) => {
                    expect(err).toBeTruthy();
                    done();
                },
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmsvbGliL2xpYi9zcmMvdGVzdC9saWIuc3BlYy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUcmVlIH0gZnJvbSBcIkBhbmd1bGFyLWRldmtpdC9zY2hlbWF0aWNzXCI7XG5pbXBvcnQge1xuICBTY2hlbWF0aWNUZXN0UnVubmVyLFxuICBVbml0VGVzdFRyZWUsXG59IGZyb20gXCJAYW5ndWxhci1kZXZraXQvc2NoZW1hdGljcy90ZXN0aW5nXCI7XG5pbXBvcnQgeyBTY2hlbWEgYXMgV29ya3NwYWNlT3B0aW9ucyB9IGZyb20gXCJAc2NoZW1hdGljcy9hbmd1bGFyL3dvcmtzcGFjZS9zY2hlbWFcIjtcbmltcG9ydCB7XG4gIFNjaGVtYSBhcyBBcHBsaWNhdGlvbk9wdGlvbnMsXG4gIFN0eWxlLFxufSBmcm9tIFwiQHNjaGVtYXRpY3MvYW5ndWxhci9hcHBsaWNhdGlvbi9zY2hlbWFcIjtcbmltcG9ydCAqIGFzIHBhdGggZnJvbSBcInBhdGhcIjtcblxuaW1wb3J0IHsgU2NoZW1hIH0gZnJvbSBcIi4uL2xpYi9zY2hlbWFcIjtcbmltcG9ydCB7IFNjaGVtYSBhcyBDcmVhdGVTY2hlbWF0aWNzT3B0aW9ucyB9IGZyb20gXCIuLi9saWIvY3JlYXRlLXNjaGVtYXRpY3Mvc2NoZW1hXCI7XG5cbmNvbnN0IGNvbGxlY3Rpb25QYXRoID0gcGF0aC5qb2luKF9fZGlybmFtZSwgXCIuLi9jb2xsZWN0aW9uLmpzb25cIik7XG5cbmNvbnN0IHNjaGVtYXRpY1J1bm5lciA9IG5ldyBTY2hlbWF0aWNUZXN0UnVubmVyKFxuICBcIkBuZ25lYXQvbGliXCIsXG4gIHJlcXVpcmUucmVzb2x2ZShjb2xsZWN0aW9uUGF0aClcbik7XG5cbmNvbnN0IHdvcmtzcGFjZU9wdGlvbnM6IFdvcmtzcGFjZU9wdGlvbnMgPSB7XG4gIG5hbWU6IFwid29ya3NwYWNlXCIsXG4gIG5ld1Byb2plY3RSb290OiBcInByb2plY3RzXCIsXG4gIHZlcnNpb246IFwiNi4wLjBcIixcbn07XG5cbmNvbnN0IHNjb3BlV2l0aE5hbWUgPSBcIkBzY29wZS90b2FzdGVyXCI7XG5cbmNvbnN0IGFwcE9wdGlvbnM6IEFwcGxpY2F0aW9uT3B0aW9ucyA9IHtcbiAgbmFtZTogXCJiYXJcIixcbiAgaW5saW5lU3R5bGU6IGZhbHNlLFxuICBpbmxpbmVUZW1wbGF0ZTogZmFsc2UsXG4gIHJvdXRpbmc6IGZhbHNlLFxuICBzdHlsZTogU3R5bGUuQ3NzLFxuICBza2lwVGVzdHM6IGZhbHNlLFxuICBza2lwUGFja2FnZUpzb246IGZhbHNlLFxufTtcblxuY29uc3QgZGVmYXVsdE9wdGlvbnM6IFBhcnRpYWw8U2NoZW1hPiA9IHtcbiAgbmFtZTogc2NvcGVXaXRoTmFtZSxcbiAgY2k6IFwiZ2l0aHViLWFjdGlvbnNcIixcbiAgc2tpcEFuZ3VsYXJDbGlHaFBhZ2VzOiB0cnVlLFxuICBza2lwU3BlY3RhdG9yOiB0cnVlLFxuICBza2lwU2NoZW1hdGljczogZmFsc2UsXG4gIHNraXBQcm9tcHRzOiB0cnVlLFxuICBpbXBvcnRNb2R1bGU6IHRydWUsXG4gIGltcG9ydFN0YXRlbWVudDogXCJUb2FzdE1vZHVsZS5mb3JSb290KClcIixcbiAgcGFja2FnZXM6IFtdLFxufTtcblxuY29uc3QgZGVmYXVsdENyZWF0ZVNjaGVtYXRpY3NPcHRpb25zOiBDcmVhdGVTY2hlbWF0aWNzT3B0aW9ucyA9IHtcbiAgbmFtZTogc2NvcGVXaXRoTmFtZSxcbiAgc2tpcFByb21wdHM6IHRydWUsXG4gIGltcG9ydE1vZHVsZTogdHJ1ZSxcbiAgaW1wb3J0U3RhdGVtZW50OiBcIlRvYXN0TW9kdWxlLmZvclJvb3QoKVwiLFxuICBwYWNrYWdlczogW10sXG59O1xuXG5jb25zdCBzY2hlbWF0aWNSZXN1bHRGaWxlcyA9IFtcbiAgXCIvcHJvamVjdHMvc2NvcGUvdG9hc3Rlci90c2NvbmZpZy5zY2hlbWF0aWNzLmpzb25cIixcbiAgXCIvcHJvamVjdHMvc2NvcGUvdG9hc3Rlci9zY2hlbWF0aWNzL2NvbGxlY3Rpb24uanNvblwiLFxuICBcIi9wcm9qZWN0cy9zY29wZS90b2FzdGVyL3NjaGVtYXRpY3MvbmctYWRkL2luZGV4LnRzXCIsXG4gIFwiL3Byb2plY3RzL3Njb3BlL3RvYXN0ZXIvc2NoZW1hdGljcy9uZy1hZGQvc2NoZW1hLmpzb25cIixcbiAgXCIvcHJvamVjdHMvc2NvcGUvdG9hc3Rlci9zY2hlbWF0aWNzL25nLWFkZC9zY2hlbWEudHNcIixcbiAgXCIvcHJvamVjdHMvc2NvcGUvdG9hc3Rlci9zY2hlbWF0aWNzL25nLWFkZC91dGlscy9pbmRleC50c1wiLFxuICBcIi9wcm9qZWN0cy9zY29wZS90b2FzdGVyL3NjaGVtYXRpY3MvbmctYWRkL3V0aWxzL25nLW1vZHVsZS1pbXBvcnRzLnRzXCIsXG4gIFwiL3Byb2plY3RzL3Njb3BlL3RvYXN0ZXIvc2NoZW1hdGljcy9uZy1hZGQvdXRpbHMvcHJvamVjdC1tYWluLWZpbGUudHNcIixcbiAgXCIvcHJvamVjdHMvc2NvcGUvdG9hc3Rlci9zY2hlbWF0aWNzL25nLWFkZC91dGlscy9wcm9qZWN0LXRhcmdldHMudHNcIixcbl07XG5cbmNvbnN0IGxpYldPU2NoZW1hdGljc1Jlc3VsdEZpbGVzID0gW1xuICBcIi9wcm9qZWN0cy9zY29wZS90b2FzdGVyL2thcm1hLmNvbmYuanNcIixcbiAgXCIvcHJvamVjdHMvc2NvcGUvdG9hc3Rlci9uZy1wYWNrYWdlLmpzb25cIixcbiAgXCIvcHJvamVjdHMvc2NvcGUvdG9hc3Rlci9wYWNrYWdlLmpzb25cIixcbiAgXCIvcHJvamVjdHMvc2NvcGUvdG9hc3Rlci9SRUFETUUubWRcIixcbiAgXCIvcHJvamVjdHMvc2NvcGUvdG9hc3Rlci90c2NvbmZpZy5saWIuanNvblwiLFxuICBcIi9wcm9qZWN0cy9zY29wZS90b2FzdGVyL3RzY29uZmlnLmxpYi5wcm9kLmpzb25cIixcbiAgXCIvcHJvamVjdHMvc2NvcGUvdG9hc3Rlci90c2NvbmZpZy5zcGVjLmpzb25cIixcbiAgXCIvcHJvamVjdHMvc2NvcGUvdG9hc3Rlci9zcmMvdGVzdC50c1wiLFxuICBcIi9wcm9qZWN0cy9zY29wZS90b2FzdGVyL3NyYy9wdWJsaWMtYXBpLnRzXCIsXG4gIFwiL3Byb2plY3RzL3Njb3BlL3RvYXN0ZXIvc3JjL2xpYi90b2FzdGVyLm1vZHVsZS50c1wiLFxuICBcIi8uYWxsLWNvbnRyaWJ1dG9yc3JjXCIsXG4gIFwiLy5wcmV0dGllcnJjLmpzb25cIixcbiAgXCIvLnJlbGVhc2VyYy5qc29uXCIsXG4gIFwiL0NPREVfT0ZfQ09ORFVDVC5tZFwiLFxuICBcIi9jb21taXRsaW50LmNvbmZpZy5qc1wiLFxuICBcIi9DT05UUklCVVRJTkcubWRcIixcbiAgXCIvLmdpdGh1Yi9JU1NVRV9URU1QTEFURS5tZFwiLFxuICBcIi9MSUNFTlNFXCIsXG4gIFwiL2xvZ28uc3ZnXCIsXG4gIFwiLy5naXRodWIvUFVMTF9SRVFVRVNUX1RFTVBMQVRFLm1kXCIsXG4gIFwiL2hvb2tzL3ByZS1jb21taXQuanNcIixcbiAgXCIvLmdpdGh1Yi93b3JrZmxvd3MvcmVsZWFzZS55bWxcIixcbiAgXCIvLmdpdGh1Yi93b3JrZmxvd3MvZGVwbG95LnltbFwiLFxuXTtcblxuY29uc3QgcmVzdWx0RmlsZXMgPSBbLi4ubGliV09TY2hlbWF0aWNzUmVzdWx0RmlsZXMsIC4uLnNjaGVtYXRpY1Jlc3VsdEZpbGVzXTtcblxuZGVzY3JpYmUoXCJuZy1hZGRcIiwgKCkgPT4ge1xuICBkZXNjcmliZShcIndpdGggcHJvamVjdFwiLCAoKSA9PiB7XG4gICAgbGV0IGFwcFRyZWU6IFVuaXRUZXN0VHJlZTtcblxuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgYXBwVHJlZSA9IGF3YWl0IHNjaGVtYXRpY1J1bm5lclxuICAgICAgICAucnVuRXh0ZXJuYWxTY2hlbWF0aWNBc3luYyhcbiAgICAgICAgICBcIkBzY2hlbWF0aWNzL2FuZ3VsYXJcIixcbiAgICAgICAgICBcIndvcmtzcGFjZVwiLFxuICAgICAgICAgIHdvcmtzcGFjZU9wdGlvbnNcbiAgICAgICAgKVxuICAgICAgICAudG9Qcm9taXNlKCk7XG4gICAgICBhcHBUcmVlID0gYXdhaXQgc2NoZW1hdGljUnVubmVyXG4gICAgICAgIC5ydW5FeHRlcm5hbFNjaGVtYXRpY0FzeW5jKFxuICAgICAgICAgIFwiQHNjaGVtYXRpY3MvYW5ndWxhclwiLFxuICAgICAgICAgIFwiYXBwbGljYXRpb25cIixcbiAgICAgICAgICBhcHBPcHRpb25zLFxuICAgICAgICAgIGFwcFRyZWVcbiAgICAgICAgKVxuICAgICAgICAudG9Qcm9taXNlKCk7XG4gICAgfSk7XG5cbiAgICBpdChcIndvcmtzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSB7IC4uLmRlZmF1bHRPcHRpb25zIH07XG4gICAgICBjb25zdCB0cmVlOiBVbml0VGVzdFRyZWUgPSBhd2FpdCBzY2hlbWF0aWNSdW5uZXJcbiAgICAgICAgLnJ1blNjaGVtYXRpY0FzeW5jKFwibmctYWRkXCIsIG9wdGlvbnMsIGFwcFRyZWUpXG4gICAgICAgIC50b1Byb21pc2UoKTtcblxuICAgICAgZXhwZWN0KHRyZWUuZmlsZXMpLnRvRXF1YWwoZXhwZWN0LmFycmF5Q29udGFpbmluZyhyZXN1bHRGaWxlcykpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJ3b3JrcyB3aXRoIHNraXBMaWI9dHJ1ZSBmb3IgZXhpc3RpbmcgY3JlYXRlZCBsaWJcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYXBwVHJlZVdpdGhMaWIgPSBhd2FpdCBzY2hlbWF0aWNSdW5uZXJcbiAgICAgICAgLnJ1bkV4dGVybmFsU2NoZW1hdGljQXN5bmMoXG4gICAgICAgICAgXCJAc2NoZW1hdGljcy9hbmd1bGFyXCIsXG4gICAgICAgICAgXCJsaWJyYXJ5XCIsXG4gICAgICAgICAgeyBuYW1lOiBzY29wZVdpdGhOYW1lIH0sXG4gICAgICAgICAgYXBwVHJlZVxuICAgICAgICApXG4gICAgICAgIC50b1Byb21pc2UoKTtcblxuICAgICAgY29uc3Qgb3B0aW9ucyA9IHsgLi4uZGVmYXVsdE9wdGlvbnMsIHNraXBMaWI6IHRydWUgfTtcbiAgICAgIGNvbnN0IHRyZWU6IFVuaXRUZXN0VHJlZSA9IGF3YWl0IHNjaGVtYXRpY1J1bm5lclxuICAgICAgICAucnVuU2NoZW1hdGljQXN5bmMoXCJuZy1hZGRcIiwgb3B0aW9ucywgYXBwVHJlZVdpdGhMaWIpXG4gICAgICAgIC50b1Byb21pc2UoKTtcblxuICAgICAgZXhwZWN0KHRyZWUuZmlsZXMpLnRvRXF1YWwoZXhwZWN0LmFycmF5Q29udGFpbmluZyhyZXN1bHRGaWxlcykpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJ3b3JrcyB3aXRoIHNraXBTY2hlbWF0aWNzPXRydWVcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgb3B0aW9ucyA9IHsgLi4uZGVmYXVsdE9wdGlvbnMsIHNraXBTY2hlbWF0aWNzOiB0cnVlIH07XG4gICAgICBjb25zdCB0cmVlOiBVbml0VGVzdFRyZWUgPSBhd2FpdCBzY2hlbWF0aWNSdW5uZXJcbiAgICAgICAgLnJ1blNjaGVtYXRpY0FzeW5jKFwibmctYWRkXCIsIG9wdGlvbnMsIGFwcFRyZWUpXG4gICAgICAgIC50b1Byb21pc2UoKTtcblxuICAgICAgZXhwZWN0KHRyZWUuZmlsZXMpLnRvRXF1YWwoXG4gICAgICAgIGV4cGVjdC5hcnJheUNvbnRhaW5pbmcobGliV09TY2hlbWF0aWNzUmVzdWx0RmlsZXMpXG4gICAgICApO1xuICAgICAgZXhwZWN0KHRyZWUuZmlsZXMpLm5vdC50b0VxdWFsKFxuICAgICAgICBleHBlY3QuYXJyYXlDb250YWluaW5nKHNjaGVtYXRpY1Jlc3VsdEZpbGVzKVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KFwiZmFpbHMgd2l0aCBtaXNzaW5nIHRyZWVcIiwgKGRvbmUpID0+IHtcbiAgICAgIHNjaGVtYXRpY1J1bm5lclxuICAgICAgICAucnVuU2NoZW1hdGljQXN5bmMoXG4gICAgICAgICAgXCJuZy1hZGRcIixcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiBcInRlc3RcIixcbiAgICAgICAgICB9LFxuICAgICAgICAgIFRyZWUuZW1wdHkoKVxuICAgICAgICApXG4gICAgICAgIC5zdWJzY3JpYmUoe1xuICAgICAgICAgIGVycm9yOiAoZXJyKSA9PiB7XG4gICAgICAgICAgICBleHBlY3QoZXJyKS50b0JlVHJ1dGh5KCk7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdChcImZhaWxzIHdpdGggbWlzc2luZyBwYXJhbXM6IG5hbWVcIiwgKGRvbmUpID0+IHtcbiAgICAgIHNjaGVtYXRpY1J1bm5lci5ydW5TY2hlbWF0aWNBc3luYyhcIm5nLWFkZFwiLCB7fSwgYXBwVHJlZSkuc3Vic2NyaWJlKHtcbiAgICAgICAgZXJyb3I6IChlcnIpID0+IHtcbiAgICAgICAgICBleHBlY3QoZXJyKS50b0JlVHJ1dGh5KCk7XG4gICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdChcImZhaWxzIHdpdGggc2tpcExpYj10cnVlIGZvciBtaXNzaW5nIGxpYlwiLCAoZG9uZSkgPT4ge1xuICAgICAgY29uc3Qgb3B0aW9ucyA9IHsgLi4uZGVmYXVsdE9wdGlvbnMsIHNraXBMaWI6IHRydWUgfTtcblxuICAgICAgc2NoZW1hdGljUnVubmVyLnJ1blNjaGVtYXRpY0FzeW5jKFwibmctYWRkXCIsIG9wdGlvbnMsIGFwcFRyZWUpLnN1YnNjcmliZSh7XG4gICAgICAgIGVycm9yOiAoZXJyKSA9PiB7XG4gICAgICAgICAgZXhwZWN0KGVycikudG9CZVRydXRoeSgpO1xuICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZShcIm5nLWdlbmVyYXRlOmNyZWF0ZS1zY2hlbWF0aWNzXCIsICgpID0+IHtcbiAgZGVzY3JpYmUoXCJ3aXRoIHByb2plY3RcIiwgKCkgPT4ge1xuICAgIGxldCBhcHBUcmVlOiBVbml0VGVzdFRyZWU7XG5cbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGFwcFRyZWUgPSBhd2FpdCBzY2hlbWF0aWNSdW5uZXJcbiAgICAgICAgLnJ1bkV4dGVybmFsU2NoZW1hdGljQXN5bmMoXG4gICAgICAgICAgXCJAc2NoZW1hdGljcy9hbmd1bGFyXCIsXG4gICAgICAgICAgXCJ3b3Jrc3BhY2VcIixcbiAgICAgICAgICB3b3Jrc3BhY2VPcHRpb25zXG4gICAgICAgIClcbiAgICAgICAgLnRvUHJvbWlzZSgpO1xuICAgICAgYXBwVHJlZSA9IGF3YWl0IHNjaGVtYXRpY1J1bm5lclxuICAgICAgICAucnVuRXh0ZXJuYWxTY2hlbWF0aWNBc3luYyhcbiAgICAgICAgICBcIkBzY2hlbWF0aWNzL2FuZ3VsYXJcIixcbiAgICAgICAgICBcImFwcGxpY2F0aW9uXCIsXG4gICAgICAgICAgYXBwT3B0aW9ucyxcbiAgICAgICAgICBhcHBUcmVlXG4gICAgICAgIClcbiAgICAgICAgLnRvUHJvbWlzZSgpO1xuICAgICAgYXBwVHJlZSA9IGF3YWl0IHNjaGVtYXRpY1J1bm5lclxuICAgICAgICAucnVuRXh0ZXJuYWxTY2hlbWF0aWNBc3luYyhcbiAgICAgICAgICBcIkBzY2hlbWF0aWNzL2FuZ3VsYXJcIixcbiAgICAgICAgICBcImxpYnJhcnlcIixcbiAgICAgICAgICB7IG5hbWU6IHNjb3BlV2l0aE5hbWUgfSxcbiAgICAgICAgICBhcHBUcmVlXG4gICAgICAgIClcbiAgICAgICAgLnRvUHJvbWlzZSgpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJ3b3Jrc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBvcHRpb25zOiBDcmVhdGVTY2hlbWF0aWNzT3B0aW9ucyA9IHtcbiAgICAgICAgLi4uZGVmYXVsdENyZWF0ZVNjaGVtYXRpY3NPcHRpb25zLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHRyZWU6IFVuaXRUZXN0VHJlZSA9IGF3YWl0IHNjaGVtYXRpY1J1bm5lclxuICAgICAgICAucnVuU2NoZW1hdGljQXN5bmMoXCJjcmVhdGUtc2NoZW1hdGljc1wiLCBvcHRpb25zLCBhcHBUcmVlKVxuICAgICAgICAudG9Qcm9taXNlKCk7XG5cbiAgICAgIGV4cGVjdCh0cmVlLmZpbGVzKS50b0VxdWFsKGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoc2NoZW1hdGljUmVzdWx0RmlsZXMpKTtcbiAgICB9KTtcblxuICAgIGl0KFwiZmFpbHMgd2l0aCBtaXNzaW5nIHRyZWVcIiwgKGRvbmUpID0+IHtcbiAgICAgIGNvbnN0IG9wdGlvbnM6IENyZWF0ZVNjaGVtYXRpY3NPcHRpb25zID0ge1xuICAgICAgICAuLi5kZWZhdWx0Q3JlYXRlU2NoZW1hdGljc09wdGlvbnMsXG4gICAgICB9O1xuXG4gICAgICBzY2hlbWF0aWNSdW5uZXJcbiAgICAgICAgLnJ1blNjaGVtYXRpY0FzeW5jKFwiY3JlYXRlLXNjaGVtYXRpY3NcIiwgb3B0aW9ucywgVHJlZS5lbXB0eSgpKVxuICAgICAgICAuc3Vic2NyaWJlKHtcbiAgICAgICAgICBlcnJvcjogKGVycikgPT4ge1xuICAgICAgICAgICAgZXhwZWN0KGVycikudG9CZVRydXRoeSgpO1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoXCJmYWlscyB3aXRoIG1pc3NpbmcgcGFyYW1zOiBuYW1lXCIsIChkb25lKSA9PiB7XG4gICAgICBzY2hlbWF0aWNSdW5uZXJcbiAgICAgICAgLnJ1blNjaGVtYXRpY0FzeW5jKFwiY3JlYXRlLXNjaGVtYXRpY3NcIiwge30sIGFwcFRyZWUpXG4gICAgICAgIC5zdWJzY3JpYmUoe1xuICAgICAgICAgIGVycm9yOiAoZXJyKSA9PiB7XG4gICAgICAgICAgICBleHBlY3QoZXJyKS50b0JlVHJ1dGh5KCk7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=
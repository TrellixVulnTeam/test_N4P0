/** Credit: https://github.com/unindented/custom-jquery-matchers/tree/master/packages/custom-jquery-matchers */
/* eslint-disable no-shadow, @typescript-eslint/no-shadow */
import $ from 'jquery';
import { hex2rgb, isHex, trim } from './internals/rgb-to-hex';
import { isHTMLOptionElementArray, isObject } from './types';
import { isRunningInJsDom, coerceArray } from './utils';
const hasProperty = (actual, expected) => {
    return expected === undefined ? actual !== undefined : actual === expected;
};
const ɵ0 = hasProperty;
const containsProperty = (actual, expected) => {
    return expected === undefined ? true : actual.includes(expected);
};
const ɵ1 = containsProperty;
const checkProperty = (el, prop, predicate) => {
    let pass = false;
    let failing = '';
    for (const key of Object.keys(prop)) {
        const actual = $(el).prop(key);
        const addendum = prop[key] !== undefined ? ` with value '${prop[key]}'` : '';
        pass = predicate(actual, prop[key]);
        failing = !pass ? `'${prop}'${addendum}, but had '${actual}'` : '';
    }
    const message = () => `Expected element${pass ? ' not' : ''} to have property ${failing}`;
    return { pass, message };
};
const ɵ2 = checkProperty;
const hasCss = (el, css) => {
    let prop;
    let value;
    const $el = $(el);
    for (prop in css) {
        if (css.hasOwnProperty(prop)) {
            value = css[prop];
            if (isHex(value)) {
                value = hex2rgb(css[prop]);
            }
            if (value === 'auto' && $el.get(0).style[prop] === 'auto') {
                continue;
            }
            if (trim($el.css(prop)) !== trim(value) && trim(el.style[prop]) !== trim(value)) {
                return false;
            }
        }
    }
    return true;
};
const ɵ3 = hasCss;
const hasSameText = (el, expected, exact = false) => {
    if (expected && Array.isArray(expected)) {
        let actual;
        let pass = false;
        let failing;
        $(el).each((i, e) => {
            actual = exact ? $(e).text() : $.trim($(e).text());
            pass = exact ? actual === expected[i] : actual.includes(expected[i]);
            if (!pass) {
                failing = expected[i];
                return false;
            }
        });
        const message = () => `Expected element${pass ? ' not' : ''} to have ${exact ? 'exact' : ''} text '${failing}', but had '${actual}'`;
        return { pass, message };
    }
    const actual = exact ? $(el).text() : $.trim($(el).text());
    if (expected && typeof expected !== 'string') {
        const pass = expected(actual);
        const message = () => `Expected element${pass ? ' not' : ''} to have ${exact ? 'exact' : ''} text matching '${expected}',` + ` but had '${actual}'`;
        return { pass, message };
    }
    const pass = exact && !Array.isArray(expected) ? actual === expected : actual.indexOf(expected) !== -1;
    const message = () => `Expected element${pass ? ' not' : ''} to have ${exact ? 'exact' : ''} text '${expected}', but had '${actual}'`;
    return { pass, message };
};
const ɵ4 = hasSameText;
const comparator = (func) => () => ({
    compare: func,
});
const ɵ5 = comparator;
const ɵ6 = (el) => {
    const actual = $(el).length;
    const pass = actual > 0;
    const message = () => `Expected ${el} element${pass ? ' not' : ''} to exist`;
    return { pass, message };
};
/**
 *
 * expect('.zippy__content').not.toExist();
 */
export const toExist = comparator(ɵ6);
const ɵ7 = (el, expected) => {
    const actual = $(el).length;
    const pass = actual === expected;
    const message = () => `Expected element${pass ? ' not' : ''} to have length ${expected}, but had ${actual}`;
    return { pass, message };
};
/**
 *
 * expect('.zippy__content').toHaveLength(3);
 */
export const toHaveLength = comparator(ɵ7);
const ɵ8 = (el, expected) => {
    const actual = $(el).attr('id');
    const pass = actual === expected;
    const message = () => `Expected element${pass ? ' not' : ''} to have ID '${expected}', but had '${actual}'`;
    return { pass, message };
};
/**
 *
 * expect('.zippy__content').toHaveId('ID');
 */
export const toHaveId = comparator(ɵ8);
const ɵ9 = (el, expected, options = { strict: true }) => {
    if (expected && Array.isArray(expected)) {
        const actual = $(el).attr('class');
        const expectedClasses = expected.join(' ');
        const pass = options.strict ? $(el).hasClass(expectedClasses) : expected.every((e) => $(el).hasClass(e));
        const message = () => `Expected element${pass ? ' not' : ''} to have value '${expectedClasses}', but had '${actual}'`;
        return { pass, message };
    }
    const actual = $(el).attr('class');
    const pass = $(el).hasClass(expected);
    const message = () => `Expected element${pass ? ' not' : ''} to have class '${expected}', but had '${actual}'`;
    return { pass, message };
};
/**
 * This validates classes in strict order. If you want to validate classes in any order,
 * just set the strict config option to false.
 *
 * expect('.zippy__content').toHaveClass('class');
 * expect('.zippy__content').toHaveClass('class-a, class-b');
 * expect('.zippy__content').toHaveClass(['class-a, class-b']);
 * expect('.zippy__content').toHaveClass(['class-b, class-a']);
 * expect('.zippy__content').not.toHaveClass(['class-b, class-a'], { strict: true });
 */
export const toHaveClass = comparator(ɵ9);
const ɵ10 = (el, attr, val) => {
    if (isObject(attr)) {
        let pass = false;
        let failing;
        for (const key of Object.keys(attr)) {
            const actual = $(el).attr(key);
            const addendum = attr[key] !== undefined ? ` with value '${attr[key]}'` : '';
            pass = hasProperty(actual, attr[key]);
            failing = !pass ? `'${attr}'${addendum}, but had '${actual}'` : '';
        }
        const message = () => `Expected element${pass ? ' not' : ''} to have attribute ${failing}`;
        return { pass, message };
    }
    const actual = $(el).attr(attr);
    const addendum = val !== undefined ? ` with value '${val}'` : '';
    const pass = hasProperty(actual, val);
    const message = () => `Expected element${pass ? ' not' : ''} to have attribute '${attr}'${addendum}, but had '${actual}'`;
    return { pass, message };
};
/**
 * expect(host.query('.zippy')).toHaveAttribute('id', 'zippy');
 */
export const toHaveAttribute = comparator(ɵ10);
const ɵ11 = (el, prop, val) => {
    if (isObject(prop)) {
        return checkProperty(el, prop, hasProperty);
    }
    const actual = $(el).prop(prop);
    const addendum = val !== undefined ? ` with value '${val}'` : '';
    const pass = hasProperty(actual, val);
    const message = () => `Expected element${pass ? ' not' : ''} to have property '${prop}'${addendum}, but had '${actual}'`;
    return { pass, message };
};
/**
 *  expect(host.query('.checkbox')).toHaveProperty('checked', true);
 *  expect(host.query('.checkbox')).toHaveProperty({checked: true});
 */
export const toHaveProperty = comparator(ɵ11);
const ɵ12 = (el, prop, val) => {
    if (isObject(prop)) {
        return checkProperty(el, prop, containsProperty);
    }
    const actual = $(el).prop(prop);
    const addendum = val !== undefined ? ` with value '${val}'` : '';
    const pass = containsProperty(actual, val);
    const message = () => `Expected element${pass ? ' not' : ''} to have property '${prop}'${addendum}, but had '${actual}'`;
    return { pass, message };
};
export const toContainProperty = comparator(ɵ12);
const ɵ13 = (el, expected, exact = false) => hasSameText(el, expected, exact);
/**
 *
 * expect('.zippy__content').toHaveText('Content');
 * expect('.zippy__content').toHaveText(['Content A', 'Content B']);
 *
 * expect('.zippy__content').toHaveText((text) => text.includes('..');
 */
export const toHaveText = comparator(ɵ13);
const ɵ14 = (el, expected) => hasSameText(el, expected, true);
export const toHaveExactText = comparator(ɵ14);
export const toContainText = toHaveText;
const ɵ15 = (el, expected) => {
    if (expected && Array.isArray(expected)) {
        let actual;
        let pass = false;
        let failing;
        $(el).each((i, e) => {
            actual = $(e).val();
            pass = actual === expected[i];
            if (!pass) {
                failing = expected[i];
                return false;
            }
        });
        const message = () => `Expected element${pass ? ' not' : ''} to have value '${failing}', but had '${actual}'`;
        return { pass, message };
    }
    const actual = $(el).val();
    const pass = actual === expected;
    const message = () => `Expected element${pass ? ' not' : ''} to have value '${expected}', but had '${actual}'`;
    return { pass, message };
};
/**
 *
 * expect('.zippy__content').toHaveValue('value');
 * expect('.zippy__content').toHaveValue(['value a', 'value b']);
 */
export const toHaveValue = comparator(ɵ15);
export const toContainValue = toHaveValue;
const ɵ16 = (el, expected) => {
    const pass = hasCss(el, expected);
    const message = () => `Expected element${pass ? ' not' : ''} to have CSS ${JSON.stringify(expected)}`;
    return { pass, message };
};
/**
 *
 *  expect(host.element).toHaveStyle({
 *    backgroundColor: 'rgba(0, 0, 0, 0.1)'
 *  });
 */
export const toHaveStyle = comparator(ɵ16);
const ɵ17 = (el, { data, val }) => {
    const actual = $(el).data(data);
    const addendum = val !== undefined ? ` with value '${val}'` : '';
    const pass = hasProperty(actual, val);
    const message = () => `Expected element${pass ? ' not' : ''} to have data '${data}'${addendum}, but had '${actual}'`;
    return { pass, message };
};
/**
 *
 * expect('.zippy__content').toHaveData({data: 'role', val: 'admin'});
 */
export const toHaveData = comparator(ɵ17);
const ɵ18 = (el) => {
    const pass = $(el).is(':checked');
    const message = () => `Expected element${pass ? ' not' : ''} to be checked`;
    return { pass, message };
};
/**
 *
 * expect('.checkbox').toBeChecked();
 */
export const toBeChecked = comparator(ɵ18);
const ɵ19 = (el) => {
    const pass = $(el).is(':disabled');
    const message = () => `Expected element${pass ? ' not' : ''} to be disabled`;
    return { pass, message };
};
/**
 *
 * expect('.checkbox').toBeDisabled();
 */
export const toBeDisabled = comparator(ɵ19);
const ɵ20 = (el) => {
    const pass = $(el).is(':empty');
    const message = () => `Expected element${pass ? ' not' : ''} to be empty`;
    return { pass, message };
};
/**
 * An empty element is an element without child elements or text.
 *
 * expect('div').toBeEmpty();
 */
export const toBeEmpty = comparator(ɵ20);
const ɵ21 = (actual, expected) => {
    const mapToPropsAndValues = (values, properties) => {
        return properties.map((prop) => {
            return {
                name: prop,
                value: values[prop],
                type: typeof values[prop],
            };
        });
    };
    const actualProps = Object.getOwnPropertyNames(actual);
    const actualPropsAndValues = mapToPropsAndValues(actual, actualProps);
    const expectedProps = Object.getOwnPropertyNames(expected);
    const expectedPropsAndValues = mapToPropsAndValues(expected, expectedProps);
    const pass = expectedProps.every((expectedProp) => actual[expectedProp] === expected[expectedProp]);
    const message = () => `Expected element${pass ? ' not' : ''} to contain properties: ${JSON.stringify(expectedPropsAndValues)}.`.concat(` Actual properties: ${JSON.stringify(actualPropsAndValues)}`);
    return { pass, message };
};
/**
 * Verify if an object has some expected properties.
 *
 * const actual = { lorem: 'first', ipsum: 'second' };
 * expect(actual).toBePartial({ lorem: 'first' });
 */
export const toBePartial = comparator(ɵ21);
/**
 * Hidden elements are elements that have:
 * 1. Display property set to "none"
 * 2. Width and height set to 0 (check not applied in jest)
 * 3. A hidden parent element (this also hides child elements)
 * 4. Type equal to "hidden" (only for form elements)
 * 5. A "hidden" attribute
 */
function isHidden(elOrSelector) {
    let el = $(elOrSelector)[0];
    if (!el) {
        return true;
    }
    const hiddenWhen = [
        (el) => !(el.offsetWidth || el.offsetHeight || el.getClientRects().length),
        (el) => el.style.display === 'none',
        (el) => el.style.visibility === 'hidden',
        (el) => el.type === 'hidden',
        (el) => el.hasAttribute('hidden'),
    ];
    if (isRunningInJsDom()) {
        // When running in JSDOM (Jest), offset-properties and client rects are always reported as 0
        // - hence, let's take a more "naive" approach here. (https://github.com/jsdom/jsdom/issues/135)
        hiddenWhen.shift();
    }
    while (el) {
        if (el === document) {
            break;
        }
        if (hiddenWhen.some((rule) => rule(el))) {
            return true;
        }
        el = el.parentNode;
    }
    return false;
}
const ɵ22 = (el) => {
    const pass = isHidden(el);
    const message = () => `Expected element${pass ? ' not' : ''} to be hidden`;
    return { pass, message };
};
/**
 * Hidden elements are elements that have:
 * 1. Display property set to "none"
 * 2. Width and height set to 0
 * 3. A hidden parent element (this also hides child elements)
 * 4. Type equal to "hidden" (only for form elements)
 * 5. A "hidden" attribute
 *
 * expect('div').toBeHidden();
 *
 */
export const toBeHidden = comparator(ɵ22);
const ɵ23 = (el) => {
    const pass = $(el).is(':selected');
    const message = () => `Expected element${pass ? ' not' : ''} to be selected`;
    return { pass, message };
};
/**
 * The :selected selector selects option elements that are pre-selected.
 *
 * expect('div').toBeSelected();
 *
 */
export const toBeSelected = comparator(ɵ23);
const ɵ24 = (el) => {
    const pass = !isHidden(el);
    const message = () => `Expected element${pass ? ' not' : ''} to be visible`;
    return { pass, message };
};
/**
 * Hidden elements are elements that have:
 * 1. Display property set to "none"
 * 2. Width and height set to 0
 * 3. A hidden parent element (this also hides child elements)
 * 4. Type equal to "hidden" (only for form elements)
 * 5. A "hidden" attribute
 *
 * expect('div').toBeVisible();
 *
 */
export const toBeVisible = comparator(ɵ24);
const ɵ25 = (el) => {
    const element = $(el).get(0);
    const pass = element === element.ownerDocument.activeElement;
    const message = () => `Expected element${pass ? ' not' : ''} to be focused`;
    return { pass, message };
};
/**
 * The :focus selector selects the element that currently has focus.
 *
 * expect('input').toBeFocused();
 */
export const toBeFocused = comparator(ɵ25);
const ɵ26 = (el, expected) => {
    const actual = $(el).filter(expected).length;
    const pass = actual > 0;
    const message = () => `Expected element${pass ? ' not' : ''} to be matched by '${expected}'`;
    return { pass, message };
};
/**
 * Check to see if the set of matched elements matches the given selector
 * returns true if the dom contains the element
 *
 * expect('div').toBeMatchedBy('.js-something')
 */
export const toBeMatchedBy = comparator(ɵ26);
const ɵ27 = (el, selector) => {
    const actual = $(el).find(selector).length;
    const pass = actual > 0;
    const message = () => `Expected element${pass ? ' not' : ''} to contain child '${selector}'`;
    return { pass, message };
};
/**
 *
 * expect('div').toHaveDescendant('.child')
 */
export const toHaveDescendant = comparator(ɵ27);
const ɵ28 = (el, { selector, text }) => {
    const actual = $.trim($(el).find(selector).text());
    if (text && $.isFunction(text.test)) {
        const pass = text.test(actual);
        const message = () => `Expected element${pass ? ' not' : ''} to have descendant '${selector}' with text matching '${text}',` + ` but had '${actual}'`;
        return { pass, message };
    }
    const pass = actual.indexOf(text) !== -1;
    const message = () => `Expected element${pass ? ' not' : ''} to have descendant '${selector}' with text '${text}', but had '${actual}'`;
    return { pass, message };
};
/**
 *
 * expect('div').toHaveDescendantWithText({selector: '.child', text: 'text'})
 */
export const toHaveDescendantWithText = comparator(ɵ28);
const ɵ29 = (el, expected) => {
    var _a;
    if (expected instanceof HTMLOptionElement) {
        const actual = $(el).find(':selected');
        const pass = actual.is($(expected));
        const message = () => `Expected element${pass ? ' not' : ''} to have options '[${expected.outerHTML}]' but had '[${actual[0].outerHTML}]'`;
        return { pass, message };
    }
    if (isHTMLOptionElementArray(expected)) {
        const actual = $(el).find(':selected');
        const pass = actual.length === expected.length && actual.toArray().every((_, index) => $(actual[index]).is(expected[index]));
        const expectedOptionsString = $(expected)
            .get()
            .map((option) => option.outerHTML)
            .join(',');
        const actualOptionsString = actual
            .get()
            .map((option) => option.outerHTML)
            .join(',');
        const message = () => `Expected element${pass ? ' not' : ''} to have options '[${expectedOptionsString}]' but had '[${actualOptionsString}]'`;
        return { pass, message };
    }
    const actual = $(el).val();
    const pass = (_a = coerceArray(expected)) === null || _a === void 0 ? void 0 : _a.every((v) => actual.includes(v));
    const expectedOptionsString = Array.isArray(expected)
        ? expected.reduce((acc, val, i) => acc + `${i === expected.length ? '' : ','}${val}`)
        : expected;
    const message = () => `Expected element${pass ? ' not' : ''} to have options '[${expectedOptionsString}]' but had '[${actual}]'`;
    return { pass, message };
};
export const toHaveSelectedOptions = comparator(ɵ29);
export { ɵ0, ɵ1, ɵ2, ɵ3, ɵ4, ɵ5, ɵ6, ɵ7, ɵ8, ɵ9, ɵ10, ɵ11, ɵ12, ɵ13, ɵ14, ɵ15, ɵ16, ɵ17, ɵ18, ɵ19, ɵ20, ɵ21, ɵ22, ɵ23, ɵ24, ɵ25, ɵ26, ɵ27, ɵ28, ɵ29 };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0Y2hlcnMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9zcGVjdGF0b3Ivc3JjL2xpYi9tYXRjaGVycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSwrR0FBK0c7QUFDL0csNERBQTREO0FBRTVELE9BQU8sQ0FBQyxNQUFNLFFBQVEsQ0FBQztBQUV2QixPQUFPLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUM5RCxPQUFPLEVBQUUsd0JBQXdCLEVBQUUsUUFBUSxFQUFFLE1BQU0sU0FBUyxDQUFDO0FBQzdELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxXQUFXLEVBQUUsTUFBTSxTQUFTLENBQUM7QUFleEQsTUFBTSxXQUFXLEdBQUcsQ0FBQyxNQUFlLEVBQUUsUUFBaUIsRUFBVyxFQUFFO0lBQ2xFLE9BQU8sUUFBUSxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUMsTUFBTSxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUMsTUFBTSxLQUFLLFFBQVEsQ0FBQztBQUM3RSxDQUFDLENBQUM7O0FBRUYsTUFBTSxnQkFBZ0IsR0FBRyxDQUFDLE1BQWMsRUFBRSxRQUFpQixFQUFXLEVBQUU7SUFDdEUsT0FBTyxRQUFRLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsUUFBa0IsQ0FBQyxDQUFDO0FBQzdFLENBQUMsQ0FBQzs7QUFFRixNQUFNLGFBQWEsR0FBRyxDQUNwQixFQUFlLEVBQ2YsSUFBWSxFQUNaLFNBQXdDLEVBQ0UsRUFBRTtJQUM1QyxJQUFJLElBQUksR0FBRyxLQUFLLENBQUM7SUFDakIsSUFBSSxPQUFPLEdBQUcsRUFBRSxDQUFDO0lBRWpCLEtBQUssTUFBTSxHQUFHLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNuQyxNQUFNLE1BQU0sR0FBRyxDQUFD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T0FBTyxFQUFFLENBQUM7QUFDM0IsQ0FBQztBQTNDRCxNQUFNLENBQUMsTUFBTSxxQkFBcUIsR0FBRyxVQUFVLEtBMkM3QyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqIENyZWRpdDogaHR0cHM6Ly9naXRodWIuY29tL3VuaW5kZW50ZWQvY3VzdG9tLWpxdWVyeS1tYXRjaGVycy90cmVlL21hc3Rlci9wYWNrYWdlcy9jdXN0b20tanF1ZXJ5LW1hdGNoZXJzICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1zaGFkb3csIEB0eXBlc2NyaXB0LWVzbGludC9uby1zaGFkb3cgKi9cblxuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcblxuaW1wb3J0IHsgaGV4MnJnYiwgaXNIZXgsIHRyaW0gfSBmcm9tICcuL2ludGVybmFscy9yZ2ItdG8taGV4JztcbmltcG9ydCB7IGlzSFRNTE9wdGlvbkVsZW1lbnRBcnJheSwgaXNPYmplY3QgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGlzUnVubmluZ0luSnNEb20sIGNvZXJjZUFycmF5IH0gZnJvbSAnLi91dGlscyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3VzdG9tTWF0Y2hlckZhY3Rvcnkge1xuICAoKTogQ3VzdG9tTWF0Y2hlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDdXN0b21NYXRjaGVyIHtcbiAgY29tcGFyZTxUPihhY3R1YWw6IFQsIGV4cGVjdGVkOiBULCAuLi5hcmdzOiBhbnlbXSk6IEN1c3RvbU1hdGNoZXJSZXN1bHQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3VzdG9tTWF0Y2hlclJlc3VsdCB7XG4gIHBhc3M6IGJvb2xlYW47XG4gIG1lc3NhZ2U/OiBzdHJpbmc7XG59XG5cbmNvbnN0IGhhc1Byb3BlcnR5ID0gKGFjdHVhbDogdW5rbm93biwgZXhwZWN0ZWQ6IHVua25vd24pOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIGV4cGVjdGVkID09PSB1bmRlZmluZWQgPyBhY3R1YWwgIT09IHVuZGVmaW5lZCA6IGFjdHVhbCA9PT0gZXhwZWN0ZWQ7XG59O1xuXG5jb25zdCBjb250YWluc1Byb3BlcnR5ID0gKGFjdHVhbDogc3RyaW5nLCBleHBlY3RlZDogdW5rbm93bik6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gZXhwZWN0ZWQgPT09IHVuZGVmaW5lZCA/IHRydWUgOiBhY3R1YWwuaW5jbHVkZXMoZXhwZWN0ZWQgYXMgc3RyaW5nKTtcbn07XG5cbmNvbnN0IGNoZWNrUHJvcGVydHkgPSAoXG4gIGVsOiBIVE1MRWxlbWVudCxcbiAgcHJvcDogb2JqZWN0LFxuICBwcmVkaWNhdGU6IChhY3R1YWwsIGV4cGVjdGVkKSA9PiBib29sZWFuXG4pOiB7IHBhc3M6IGJvb2xlYW47IG1lc3NhZ2U6ICgpID0+IHN0cmluZyB9ID0+IHtcbiAgbGV0IHBhc3MgPSBmYWxzZTtcbiAgbGV0IGZhaWxpbmcgPSAnJztcblxuICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhwcm9wKSkge1xuICAgIGNvbnN0IGFjdHVhbCA9ICQoZWwpLnByb3Aoa2V5KTtcbiAgICBjb25zdCBhZGRlbmR1bSA9IHByb3Bba2V5XSAhPT0gdW5kZWZpbmVkID8gYCB3aXRoIHZhbHVlICcke3Byb3Bba2V5XX0nYCA6ICcnO1xuXG4gICAgcGFzcyA9IHByZWRpY2F0ZShhY3R1YWwsIHByb3Bba2V5XSk7XG4gICAgZmFpbGluZyA9ICFwYXNzID8gYCcke3Byb3B9JyR7YWRkZW5kdW19LCBidXQgaGFkICcke2FjdHVhbH0nYCA6ICcnO1xuICB9XG5cbiAgY29uc3QgbWVzc2FnZSA9ICgpID0+IGBFeHBlY3RlZCBlbGVtZW50JHtwYXNzID8gJyBub3QnIDogJyd9IHRvIGhhdmUgcHJvcGVydHkgJHtmYWlsaW5nfWA7XG5cbiAgcmV0dXJuIHsgcGFzcywgbWVzc2FnZSB9O1xufTtcblxuY29uc3QgaGFzQ3NzID0gKGVsOiBIVE1MRWxlbWVudCwgY3NzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KSA9PiB7XG4gIGxldCBwcm9wO1xuICBsZXQgdmFsdWU7XG4gIGNvbnN0ICRlbCA9ICQoZWwpO1xuICBmb3IgKHByb3AgaW4gY3NzKSB7XG4gICAgaWYgKGNzcy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgdmFsdWUgPSBjc3NbcHJvcF07XG5cbiAgICAgIGlmIChpc0hleCh2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSBoZXgycmdiKGNzc1twcm9wXSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh2YWx1ZSA9PT0gJ2F1dG8nICYmICRlbC5nZXQoMCkuc3R5bGVbcHJvcF0gPT09ICdhdXRvJykge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRyaW0oJGVsLmNzcyhwcm9wKSkgIT09IHRyaW0odmFsdWUpICYmIHRyaW0oZWwuc3R5bGVbcHJvcF0pICE9PSB0cmltKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5jb25zdCBoYXNTYW1lVGV4dCA9IChlbDogSFRNTEVsZW1lbnQsIGV4cGVjdGVkOiBzdHJpbmcgfCBzdHJpbmdbXSB8ICgoczogc3RyaW5nKSA9PiBib29sZWFuKSwgZXhhY3QgPSBmYWxzZSkgPT4ge1xuICBpZiAoZXhwZWN0ZWQgJiYgQXJyYXkuaXNBcnJheShleHBlY3RlZCkpIHtcbiAgICBsZXQgYWN0dWFsOiBzdHJpbmc7XG4gICAgbGV0IHBhc3MgPSBmYWxzZTtcbiAgICBsZXQgZmFpbGluZzogc3RyaW5nO1xuXG4gICAgJChlbCkuZWFjaCgoaSwgZSkgPT4ge1xuICAgICAgYWN0dWFsID0gZXhhY3QgPyAkKGUpLnRleHQoKSA6ICQudHJpbSgkKGUpLnRleHQoKSk7XG4gICAgICBwYXNzID0gZXhhY3QgPyBhY3R1YWwgPT09IGV4cGVjdGVkW2ldIDogYWN0dWFsLmluY2x1ZGVzKGV4cGVjdGVkW2ldKTtcbiAgICAgIGlmICghcGFzcykge1xuICAgICAgICBmYWlsaW5nID0gZXhwZWN0ZWRbaV07XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgbWVzc2FnZSA9ICgpID0+IGBFeHBlY3RlZCBlbGVtZW50JHtwYXNzID8gJyBub3QnIDogJyd9IHRvIGhhdmUgJHtleGFjdCA/ICdleGFjdCcgOiAnJ30gdGV4dCAnJHtmYWlsaW5nfScsIGJ1dCBoYWQgJyR7YWN0dWFsfSdgO1xuXG4gICAgcmV0dXJuIHsgcGFzcywgbWVzc2FnZSB9O1xuICB9XG5cbiAgY29uc3QgYWN0dWFsID0gZXhhY3QgPyAkKGVsKS50ZXh0KCkgOiAkLnRyaW0oJChlbCkudGV4dCgpKTtcblxuICBpZiAoZXhwZWN0ZWQgJiYgdHlwZW9mIGV4cGVjdGVkICE9PSAnc3RyaW5nJykge1xuICAgIGNvbnN0IHBhc3MgPSBleHBlY3RlZChhY3R1YWwpO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSAoKSA9PlxuICAgICAgYEV4cGVjdGVkIGVsZW1lbnQke3Bhc3MgPyAnIG5vdCcgOiAnJ30gdG8gaGF2ZSAke2V4YWN0ID8gJ2V4YWN0JyA6ICcnfSB0ZXh0IG1hdGNoaW5nICcke2V4cGVjdGVkfScsYCArIGAgYnV0IGhhZCAnJHthY3R1YWx9J2A7XG5cbiAgICByZXR1cm4geyBwYXNzLCBtZXNzYWdlIH07XG4gIH1cblxuICBjb25zdCBwYXNzID0gZXhhY3QgJiYgIUFycmF5LmlzQXJyYXkoZXhwZWN0ZWQpID8gYWN0dWFsID09PSBleHBlY3RlZCA6IGFjdHVhbC5pbmRleE9mKGV4cGVjdGVkKSAhPT0gLTE7XG4gIGNvbnN0IG1lc3NhZ2UgPSAoKSA9PiBgRXhwZWN0ZWQgZWxlbWVudCR7cGFzcyA/ICcgbm90JyA6ICcnfSB0byBoYXZlICR7ZXhhY3QgPyAnZXhhY3QnIDogJyd9IHRleHQgJyR7ZXhwZWN0ZWR9JywgYnV0IGhhZCAnJHthY3R1YWx9J2A7XG5cbiAgcmV0dXJuIHsgcGFzcywgbWVzc2FnZSB9O1xufTtcblxuY29uc3QgY29tcGFyYXRvciA9XG4gIChmdW5jKTogQ3VzdG9tTWF0Y2hlckZhY3RvcnkgPT5cbiAgKCkgPT4gKHtcbiAgICBjb21wYXJlOiBmdW5jLFxuICB9KTtcblxuLyoqXG4gKlxuICogZXhwZWN0KCcuemlwcHlfX2NvbnRlbnQnKS5ub3QudG9FeGlzdCgpO1xuICovXG5leHBvcnQgY29uc3QgdG9FeGlzdCA9IGNvbXBhcmF0b3IoKGVsOiBzdHJpbmcgfCBFbGVtZW50KSA9PiB7XG4gIGNvbnN0IGFjdHVhbCA9ICQoZWwpLmxlbmd0aDtcbiAgY29uc3QgcGFzcyA9IGFjdHVhbCA+IDA7XG4gIGNvbnN0IG1lc3NhZ2UgPSAoKSA9PiBgRXhwZWN0ZWQgJHtlbH0gZWxlbWVudCR7cGFzcyA/ICcgbm90JyA6ICcnfSB0byBleGlzdGA7XG5cbiAgcmV0dXJuIHsgcGFzcywgbWVzc2FnZSB9O1xufSk7XG5cbi8qKlxuICpcbiAqIGV4cGVjdCgnLnppcHB5X19jb250ZW50JykudG9IYXZlTGVuZ3RoKDMpO1xuICovXG5leHBvcnQgY29uc3QgdG9IYXZlTGVuZ3RoID0gY29tcGFyYXRvcigoZWw6IHN0cmluZywgZXhwZWN0ZWQ6IG51bWJlcikgPT4ge1xuICBjb25zdCBhY3R1YWwgPSAkKGVsKS5sZW5ndGg7XG4gIGNvbnN0IHBhc3MgPSBhY3R1YWwgPT09IGV4cGVjdGVkO1xuICBjb25zdCBtZXNzYWdlID0gKCkgPT4gYEV4cGVjdGVkIGVsZW1lbnQke3Bhc3MgPyAnIG5vdCcgOiAnJ30gdG8gaGF2ZSBsZW5ndGggJHtleHBlY3RlZH0sIGJ1dCBoYWQgJHthY3R1YWx9YDtcblxuICByZXR1cm4geyBwYXNzLCBtZXNzYWdlIH07XG59KTtcblxuLyoqXG4gKlxuICogZXhwZWN0KCcuemlwcHlfX2NvbnRlbnQnKS50b0hhdmVJZCgnSUQnKTtcbiAqL1xuZXhwb3J0IGNvbnN0IHRvSGF2ZUlkID0gY29tcGFyYXRvcigoZWwsIGV4cGVjdGVkKSA9PiB7XG4gIGNvbnN0IGFjdHVhbCA9ICQoZWwpLmF0dHIoJ2lkJyk7XG4gIGNvbnN0IHBhc3MgPSBhY3R1YWwgPT09IGV4cGVjdGVkO1xuICBjb25zdCBtZXNzYWdlID0gKCkgPT4gYEV4cGVjdGVkIGVsZW1lbnQke3Bhc3MgPyAnIG5vdCcgOiAnJ30gdG8gaGF2ZSBJRCAnJHtleHBlY3RlZH0nLCBidXQgaGFkICcke2FjdHVhbH0nYDtcblxuICByZXR1cm4geyBwYXNzLCBtZXNzYWdlIH07XG59KTtcblxuLyoqXG4gKiBUaGlzIHZhbGlkYXRlcyBjbGFzc2VzIGluIHN0cmljdCBvcmRlci4gSWYgeW91IHdhbnQgdG8gdmFsaWRhdGUgY2xhc3NlcyBpbiBhbnkgb3JkZXIsXG4gKiBqdXN0IHNldCB0aGUgc3RyaWN0IGNvbmZpZyBvcHRpb24gdG8gZmFsc2UuXG4gKlxuICogZXhwZWN0KCcuemlwcHlfX2NvbnRlbnQnKS50b0hhdmVDbGFzcygnY2xhc3MnKTtcbiAqIGV4cGVjdCgnLnppcHB5X19jb250ZW50JykudG9IYXZlQ2xhc3MoJ2NsYXNzLWEsIGNsYXNzLWInKTtcbiAqIGV4cGVjdCgnLnppcHB5X19jb250ZW50JykudG9IYXZlQ2xhc3MoWydjbGFzcy1hLCBjbGFzcy1iJ10pO1xuICogZXhwZWN0KCcuemlwcHlfX2NvbnRlbnQnKS50b0hhdmVDbGFzcyhbJ2NsYXNzLWIsIGNsYXNzLWEnXSk7XG4gKiBleHBlY3QoJy56aXBweV9fY29udGVudCcpLm5vdC50b0hhdmVDbGFzcyhbJ2NsYXNzLWIsIGNsYXNzLWEnXSwgeyBzdHJpY3Q6IHRydWUgfSk7XG4gKi9cbmV4cG9ydCBjb25zdCB0b0hhdmVDbGFzcyA9IGNvbXBhcmF0b3IoKGVsLCBleHBlY3RlZDogc3RyaW5nIHwgc3RyaW5nW10sIG9wdGlvbnM6IHsgc3RyaWN0OiBib29sZWFuIH0gPSB7IHN0cmljdDogdHJ1ZSB9KSA9PiB7XG4gIGlmIChleHBlY3RlZCAmJiBBcnJheS5pc0FycmF5KGV4cGVjdGVkKSkge1xuICAgIGNvbnN0IGFjdHVhbDogc3RyaW5nID0gJChlbCkuYXR0cignY2xhc3MnKTtcbiAgICBjb25zdCBleHBlY3RlZENsYXNzZXMgPSBleHBlY3RlZC5qb2luKCcgJyk7XG4gICAgY29uc3QgcGFzcyA9IG9wdGlvbnMuc3RyaWN0ID8gJChlbCkuaGFzQ2xhc3MoZXhwZWN0ZWRDbGFzc2VzKSA6IGV4cGVjdGVkLmV2ZXJ5KChlKSA9PiAkKGVsKS5oYXNDbGFzcyhlKSk7XG4gICAgY29uc3QgbWVzc2FnZSA9ICgpID0+IGBFeHBlY3RlZCBlbGVtZW50JHtwYXNzID8gJyBub3QnIDogJyd9IHRvIGhhdmUgdmFsdWUgJyR7ZXhwZWN0ZWRDbGFzc2VzfScsIGJ1dCBoYWQgJyR7YWN0dWFsfSdgO1xuXG4gICAgcmV0dXJuIHsgcGFzcywgbWVzc2FnZSB9O1xuICB9XG5cbiAgY29uc3QgYWN0dWFsID0gJChlbCkuYXR0cignY2xhc3MnKTtcbiAgY29uc3QgcGFzcyA9ICQoZWwpLmhhc0NsYXNzKGV4cGVjdGVkKTtcbiAgY29uc3QgbWVzc2FnZSA9ICgpID0+IGBFeHBlY3RlZCBlbGVtZW50JHtwYXNzID8gJyBub3QnIDogJyd9IHRvIGhhdmUgY2xhc3MgJyR7ZXhwZWN0ZWR9JywgYnV0IGhhZCAnJHthY3R1YWx9J2A7XG5cbiAgcmV0dXJuIHsgcGFzcywgbWVzc2FnZSB9O1xufSk7XG5cbi8qKlxuICogZXhwZWN0KGhvc3QucXVlcnkoJy56aXBweScpKS50b0hhdmVBdHRyaWJ1dGUoJ2lkJywgJ3ppcHB5Jyk7XG4gKi9cbmV4cG9ydCBjb25zdCB0b0hhdmVBdHRyaWJ1dGUgPSBjb21wYXJhdG9yKChlbCwgYXR0cjogc3RyaW5nIHwgb2JqZWN0LCB2YWwpID0+IHtcbiAgaWYgKGlzT2JqZWN0KGF0dHIpKSB7XG4gICAgbGV0IHBhc3MgPSBmYWxzZTtcbiAgICBsZXQgZmFpbGluZzogc3RyaW5nO1xuXG4gICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoYXR0cikpIHtcbiAgICAgIGNvbnN0IGFjdHVhbCA9ICQoZWwpLmF0dHIoa2V5KTtcbiAgICAgIGNvbnN0IGFkZGVuZHVtID0gYXR0cltrZXldICE9PSB1bmRlZmluZWQgPyBgIHdpdGggdmFsdWUgJyR7YXR0cltrZXldfSdgIDogJyc7XG4gICAgICBwYXNzID0gaGFzUHJvcGVydHkoYWN0dWFsLCBhdHRyW2tleV0pO1xuICAgICAgZmFpbGluZyA9ICFwYXNzID8gYCcke2F0dHJ9JyR7YWRkZW5kdW19LCBidXQgaGFkICcke2FjdHVhbH0nYCA6ICcnO1xuICAgIH1cbiAgICBjb25zdCBtZXNzYWdlID0gKCkgPT4gYEV4cGVjdGVkIGVsZW1lbnQke3Bhc3MgPyAnIG5vdCcgOiAnJ30gdG8gaGF2ZSBhdHRyaWJ1dGUgJHtmYWlsaW5nfWA7XG5cbiAgICByZXR1cm4geyBwYXNzLCBtZXNzYWdlIH07XG4gIH1cblxuICBjb25zdCBhY3R1YWwgPSAkKGVsKS5hdHRyKGF0dHIpO1xuICBjb25zdCBhZGRlbmR1bSA9IHZhbCAhPT0gdW5kZWZpbmVkID8gYCB3aXRoIHZhbHVlICcke3ZhbH0nYCA6ICcnO1xuICBjb25zdCBwYXNzID0gaGFzUHJvcGVydHkoYWN0dWFsLCB2YWwpO1xuICBjb25zdCBtZXNzYWdlID0gKCkgPT4gYEV4cGVjdGVkIGVsZW1lbnQke3Bhc3MgPyAnIG5vdCcgOiAnJ30gdG8gaGF2ZSBhdHRyaWJ1dGUgJyR7YXR0cn0nJHthZGRlbmR1bX0sIGJ1dCBoYWQgJyR7YWN0dWFsfSdgO1xuXG4gIHJldHVybiB7IHBhc3MsIG1lc3NhZ2UgfTtcbn0pO1xuXG4vKipcbiAqICBleHBlY3QoaG9zdC5xdWVyeSgnLmNoZWNrYm94JykpLnRvSGF2ZVByb3BlcnR5KCdjaGVja2VkJywgdHJ1ZSk7XG4gKiAgZXhwZWN0KGhvc3QucXVlcnkoJy5jaGVja2JveCcpKS50b0hhdmVQcm9wZXJ0eSh7Y2hlY2tlZDogdHJ1ZX0pO1xuICovXG5leHBvcnQgY29uc3QgdG9IYXZlUHJvcGVydHkgPSBjb21wYXJhdG9yKChlbCwgcHJvcCwgdmFsKSA9PiB7XG4gIGlmIChpc09iamVjdChwcm9wKSkge1xuICAgIHJldHVybiBjaGVja1Byb3BlcnR5KGVsLCBwcm9wLCBoYXNQcm9wZXJ0eSk7XG4gIH1cblxuICBjb25zdCBhY3R1YWwgPSAkKGVsKS5wcm9wKHByb3ApO1xuICBjb25zdCBhZGRlbmR1bSA9IHZhbCAhPT0gdW5kZWZpbmVkID8gYCB3aXRoIHZhbHVlICcke3ZhbH0nYCA6ICcnO1xuICBjb25zdCBwYXNzID0gaGFzUHJvcGVydHkoYWN0dWFsLCB2YWwpO1xuICBjb25zdCBtZXNzYWdlID0gKCkgPT4gYEV4cGVjdGVkIGVsZW1lbnQke3Bhc3MgPyAnIG5vdCcgOiAnJ30gdG8gaGF2ZSBwcm9wZXJ0eSAnJHtwcm9wfScke2FkZGVuZHVtfSwgYnV0IGhhZCAnJHthY3R1YWx9J2A7XG5cbiAgcmV0dXJuIHsgcGFzcywgbWVzc2FnZSB9O1xufSk7XG5cbmV4cG9ydCBjb25zdCB0b0NvbnRhaW5Qcm9wZXJ0eSA9IGNvbXBhcmF0b3IoKGVsLCBwcm9wLCB2YWwpID0+IHtcbiAgaWYgKGlzT2JqZWN0KHByb3ApKSB7XG4gICAgcmV0dXJuIGNoZWNrUHJvcGVydHkoZWwsIHByb3AsIGNvbnRhaW5zUHJvcGVydHkpO1xuICB9XG5cbiAgY29uc3QgYWN0dWFsID0gJChlbCkucHJvcChwcm9wKTtcbiAgY29uc3QgYWRkZW5kdW0gPSB2YWwgIT09IHVuZGVmaW5lZCA/IGAgd2l0aCB2YWx1ZSAnJHt2YWx9J2AgOiAnJztcbiAgY29uc3QgcGFzcyA9IGNvbnRhaW5zUHJvcGVydHkoYWN0dWFsLCB2YWwpO1xuICBjb25zdCBtZXNzYWdlID0gKCkgPT4gYEV4cGVjdGVkIGVsZW1lbnQke3Bhc3MgPyAnIG5vdCcgOiAnJ30gdG8gaGF2ZSBwcm9wZXJ0eSAnJHtwcm9wfScke2FkZGVuZHVtfSwgYnV0IGhhZCAnJHthY3R1YWx9J2A7XG5cbiAgcmV0dXJuIHsgcGFzcywgbWVzc2FnZSB9O1xufSk7XG5cbi8qKlxuICpcbiAqIGV4cGVjdCgnLnppcHB5X19jb250ZW50JykudG9IYXZlVGV4dCgnQ29udGVudCcpO1xuICogZXhwZWN0KCcuemlwcHlfX2NvbnRlbnQnKS50b0hhdmVUZXh0KFsnQ29udGVudCBBJywgJ0NvbnRlbnQgQiddKTtcbiAqXG4gKiBleHBlY3QoJy56aXBweV9fY29udGVudCcpLnRvSGF2ZVRleHQoKHRleHQpID0+IHRleHQuaW5jbHVkZXMoJy4uJyk7XG4gKi9cbmV4cG9ydCBjb25zdCB0b0hhdmVUZXh0ID0gY29tcGFyYXRvcigoZWwsIGV4cGVjdGVkLCBleGFjdCA9IGZhbHNlKSA9PiBoYXNTYW1lVGV4dChlbCwgZXhwZWN0ZWQsIGV4YWN0KSk7XG5cbmV4cG9ydCBjb25zdCB0b0hhdmVFeGFjdFRleHQgPSBjb21wYXJhdG9yKChlbCwgZXhwZWN0ZWQpID0+IGhhc1NhbWVUZXh0KGVsLCBleHBlY3RlZCwgdHJ1ZSkpO1xuXG5leHBvcnQgY29uc3QgdG9Db250YWluVGV4dCA9IHRvSGF2ZVRleHQ7XG5cbi8qKlxuICpcbiAqIGV4cGVjdCgnLnppcHB5X19jb250ZW50JykudG9IYXZlVmFsdWUoJ3ZhbHVlJyk7XG4gKiBleHBlY3QoJy56aXBweV9fY29udGVudCcpLnRvSGF2ZVZhbHVlKFsndmFsdWUgYScsICd2YWx1ZSBiJ10pO1xuICovXG5leHBvcnQgY29uc3QgdG9IYXZlVmFsdWUgPSBjb21wYXJhdG9yKChlbCwgZXhwZWN0ZWQpID0+IHtcbiAgaWYgKGV4cGVjdGVkICYmIEFycmF5LmlzQXJyYXkoZXhwZWN0ZWQpKSB7XG4gICAgbGV0IGFjdHVhbDogc3RyaW5nO1xuICAgIGxldCBwYXNzID0gZmFsc2U7XG4gICAgbGV0IGZhaWxpbmc6IHN0cmluZztcblxuICAgICQoZWwpLmVhY2goKGksIGUpID0+IHtcbiAgICAgIGFjdHVhbCA9ICQoZSkudmFsKCk7XG4gICAgICBwYXNzID0gYWN0dWFsID09PSBleHBlY3RlZFtpXTtcbiAgICAgIGlmICghcGFzcykge1xuICAgICAgICBmYWlsaW5nID0gZXhwZWN0ZWRbaV07XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgbWVzc2FnZSA9ICgpID0+IGBFeHBlY3RlZCBlbGVtZW50JHtwYXNzID8gJyBub3QnIDogJyd9IHRvIGhhdmUgdmFsdWUgJyR7ZmFpbGluZ30nLCBidXQgaGFkICcke2FjdHVhbH0nYDtcblxuICAgIHJldHVybiB7IHBhc3MsIG1lc3NhZ2UgfTtcbiAgfVxuXG4gIGNvbnN0IGFjdHVhbCA9ICQoZWwpLnZhbCgpO1xuICBjb25zdCBwYXNzID0gYWN0dWFsID09PSBleHBlY3RlZDtcbiAgY29uc3QgbWVzc2FnZSA9ICgpID0+IGBFeHBlY3RlZCBlbGVtZW50JHtwYXNzID8gJyBub3QnIDogJyd9IHRvIGhhdmUgdmFsdWUgJyR7ZXhwZWN0ZWR9JywgYnV0IGhhZCAnJHthY3R1YWx9J2A7XG5cbiAgcmV0dXJuIHsgcGFzcywgbWVzc2FnZSB9O1xufSk7XG5cbmV4cG9ydCBjb25zdCB0b0NvbnRhaW5WYWx1ZSA9IHRvSGF2ZVZhbHVlO1xuXG4vKipcbiAqXG4gKiAgZXhwZWN0KGhvc3QuZWxlbWVudCkudG9IYXZlU3R5bGUoe1xuICogICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgwLCAwLCAwLCAwLjEpJ1xuICogIH0pO1xuICovXG5leHBvcnQgY29uc3QgdG9IYXZlU3R5bGUgPSBjb21wYXJhdG9yKChlbCwgZXhwZWN0ZWQpID0+IHtcbiAgY29uc3QgcGFzcyA9IGhhc0NzcyhlbCwgZXhwZWN0ZWQpO1xuICBjb25zdCBtZXNzYWdlID0gKCkgPT4gYEV4cGVjdGVkIGVsZW1lbnQke3Bhc3MgPyAnIG5vdCcgOiAnJ30gdG8gaGF2ZSBDU1MgJHtKU09OLnN0cmluZ2lmeShleHBlY3RlZCl9YDtcblxuICByZXR1cm4geyBwYXNzLCBtZXNzYWdlIH07XG59KTtcblxuLyoqXG4gKlxuICogZXhwZWN0KCcuemlwcHlfX2NvbnRlbnQnKS50b0hhdmVEYXRhKHtkYXRhOiAncm9sZScsIHZhbDogJ2FkbWluJ30pO1xuICovXG5leHBvcnQgY29uc3QgdG9IYXZlRGF0YSA9IGNvbXBhcmF0b3IoKGVsLCB7IGRhdGEsIHZhbCB9KSA9PiB7XG4gIGNvbnN0IGFjdHVhbCA9ICQoZWwpLmRhdGEoZGF0YSk7XG4gIGNvbnN0IGFkZGVuZHVtID0gdmFsICE9PSB1bmRlZmluZWQgPyBgIHdpdGggdmFsdWUgJyR7dmFsfSdgIDogJyc7XG4gIGNvbnN0IHBhc3MgPSBoYXNQcm9wZXJ0eShhY3R1YWwsIHZhbCk7XG4gIGNvbnN0IG1lc3NhZ2UgPSAoKSA9PiBgRXhwZWN0ZWQgZWxlbWVudCR7cGFzcyA/ICcgbm90JyA6ICcnfSB0byBoYXZlIGRhdGEgJyR7ZGF0YX0nJHthZGRlbmR1bX0sIGJ1dCBoYWQgJyR7YWN0dWFsfSdgO1xuXG4gIHJldHVybiB7IHBhc3MsIG1lc3NhZ2UgfTtcbn0pO1xuXG4vKipcbiAqXG4gKiBleHBlY3QoJy5jaGVja2JveCcpLnRvQmVDaGVja2VkKCk7XG4gKi9cbmV4cG9ydCBjb25zdCB0b0JlQ2hlY2tlZCA9IGNvbXBhcmF0b3IoKGVsKSA9PiB7XG4gIGNvbnN0IHBhc3MgPSAkKGVsKS5pcygnOmNoZWNrZWQnKTtcbiAgY29uc3QgbWVzc2FnZSA9ICgpID0+IGBFeHBlY3RlZCBlbGVtZW50JHtwYXNzID8gJyBub3QnIDogJyd9IHRvIGJlIGNoZWNrZWRgO1xuXG4gIHJldHVybiB7IHBhc3MsIG1lc3NhZ2UgfTtcbn0pO1xuXG4vKipcbiAqXG4gKiBleHBlY3QoJy5jaGVja2JveCcpLnRvQmVEaXNhYmxlZCgpO1xuICovXG5leHBvcnQgY29uc3QgdG9CZURpc2FibGVkID0gY29tcGFyYXRvcigoZWwpID0+IHtcbiAgY29uc3QgcGFzcyA9ICQoZWwpLmlzKCc6ZGlzYWJsZWQnKTtcbiAgY29uc3QgbWVzc2FnZSA9ICgpID0+IGBFeHBlY3RlZCBlbGVtZW50JHtwYXNzID8gJyBub3QnIDogJyd9IHRvIGJlIGRpc2FibGVkYDtcblxuICByZXR1cm4geyBwYXNzLCBtZXNzYWdlIH07XG59KTtcblxuLyoqXG4gKiBBbiBlbXB0eSBlbGVtZW50IGlzIGFuIGVsZW1lbnQgd2l0aG91dCBjaGlsZCBlbGVtZW50cyBvciB0ZXh0LlxuICpcbiAqIGV4cGVjdCgnZGl2JykudG9CZUVtcHR5KCk7XG4gKi9cbmV4cG9ydCBjb25zdCB0b0JlRW1wdHkgPSBjb21wYXJhdG9yKChlbCkgPT4ge1xuICBjb25zdCBwYXNzID0gJChlbCkuaXMoJzplbXB0eScpO1xuICBjb25zdCBtZXNzYWdlID0gKCkgPT4gYEV4cGVjdGVkIGVsZW1lbnQke3Bhc3MgPyAnIG5vdCcgOiAnJ30gdG8gYmUgZW1wdHlgO1xuXG4gIHJldHVybiB7IHBhc3MsIG1lc3NhZ2UgfTtcbn0pO1xuXG4vKipcbiAqIFZlcmlmeSBpZiBhbiBvYmplY3QgaGFzIHNvbWUgZXhwZWN0ZWQgcHJvcGVydGllcy5cbiAqXG4gKiBjb25zdCBhY3R1YWwgPSB7IGxvcmVtOiAnZmlyc3QnLCBpcHN1bTogJ3NlY29uZCcgfTtcbiAqIGV4cGVjdChhY3R1YWwpLnRvQmVQYXJ0aWFsKHsgbG9yZW06ICdmaXJzdCcgfSk7XG4gKi9cbmV4cG9ydCBjb25zdCB0b0JlUGFydGlhbCA9IGNvbXBhcmF0b3IoKGFjdHVhbCwgZXhwZWN0ZWQpID0+IHtcbiAgY29uc3QgbWFwVG9Qcm9wc0FuZFZhbHVlcyA9ICh2YWx1ZXM6IGFueVtdLCBwcm9wZXJ0aWVzOiBhbnlbXSkgPT4ge1xuICAgIHJldHVybiBwcm9wZXJ0aWVzLm1hcCgocHJvcCkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogcHJvcCxcbiAgICAgICAgdmFsdWU6IHZhbHVlc1twcm9wXSxcbiAgICAgICAgdHlwZTogdHlwZW9mIHZhbHVlc1twcm9wXSxcbiAgICAgIH07XG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IGFjdHVhbFByb3BzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYWN0dWFsKTtcbiAgY29uc3QgYWN0dWFsUHJvcHNBbmRWYWx1ZXMgPSBtYXBUb1Byb3BzQW5kVmFsdWVzKGFjdHVhbCwgYWN0dWFsUHJvcHMpO1xuXG4gIGNvbnN0IGV4cGVjdGVkUHJvcHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhleHBlY3RlZCk7XG4gIGNvbnN0IGV4cGVjdGVkUHJvcHNBbmRWYWx1ZXMgPSBtYXBUb1Byb3BzQW5kVmFsdWVzKGV4cGVjdGVkLCBleHBlY3RlZFByb3BzKTtcblxuICBjb25zdCBwYXNzID0gZXhwZWN0ZWRQcm9wcy5ldmVyeSgoZXhwZWN0ZWRQcm9wKSA9PiBhY3R1YWxbZXhwZWN0ZWRQcm9wXSA9PT0gZXhwZWN0ZWRbZXhwZWN0ZWRQcm9wXSk7XG4gIGNvbnN0IG1lc3NhZ2UgPSAoKSA9PlxuICAgIGBFeHBlY3RlZCBlbGVtZW50JHtwYXNzID8gJyBub3QnIDogJyd9IHRvIGNvbnRhaW4gcHJvcGVydGllczogJHtKU09OLnN0cmluZ2lmeShleHBlY3RlZFByb3BzQW5kVmFsdWVzKX0uYC5jb25jYXQoXG4gICAgICBgIEFjdHVhbCBwcm9wZXJ0aWVzOiAke0pTT04uc3RyaW5naWZ5KGFjdHVhbFByb3BzQW5kVmFsdWVzKX1gXG4gICAgKTtcblxuICByZXR1cm4geyBwYXNzLCBtZXNzYWdlIH07XG59KTtcblxuLyoqXG4gKiBIaWRkZW4gZWxlbWVudHMgYXJlIGVsZW1lbnRzIHRoYXQgaGF2ZTpcbiAqIDEuIERpc3BsYXkgcHJvcGVydHkgc2V0IHRvIFwibm9uZVwiXG4gKiAyLiBXaWR0aCBhbmQgaGVpZ2h0IHNldCB0byAwIChjaGVjayBub3QgYXBwbGllZCBpbiBqZXN0KVxuICogMy4gQSBoaWRkZW4gcGFyZW50IGVsZW1lbnQgKHRoaXMgYWxzbyBoaWRlcyBjaGlsZCBlbGVtZW50cylcbiAqIDQuIFR5cGUgZXF1YWwgdG8gXCJoaWRkZW5cIiAob25seSBmb3IgZm9ybSBlbGVtZW50cylcbiAqIDUuIEEgXCJoaWRkZW5cIiBhdHRyaWJ1dGVcbiAqL1xuZnVuY3Rpb24gaXNIaWRkZW4oZWxPclNlbGVjdG9yOiBIVE1MRWxlbWVudCB8IHN0cmluZyk6IGJvb2xlYW4ge1xuICBsZXQgZWwgPSAkKGVsT3JTZWxlY3RvcilbMF07XG5cbiAgaWYgKCFlbCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgY29uc3QgaGlkZGVuV2hlbiA9IFtcbiAgICAoZWwpID0+ICEoZWwub2Zmc2V0V2lkdGggfHwgZWwub2Zmc2V0SGVpZ2h0IHx8IGVsLmdldENsaWVudFJlY3RzKCkubGVuZ3RoKSxcbiAgICAoZWwpID0+IGVsLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJyxcbiAgICAoZWwpID0+IGVsLnN0eWxlLnZpc2liaWxpdHkgPT09ICdoaWRkZW4nLFxuICAgIChlbCkgPT4gZWwudHlwZSA9PT0gJ2hpZGRlbicsXG4gICAgKGVsKSA9PiBlbC5oYXNBdHRyaWJ1dGUoJ2hpZGRlbicpLFxuICBdO1xuXG4gIGlmIChpc1J1bm5pbmdJbkpzRG9tKCkpIHtcbiAgICAvLyBXaGVuIHJ1bm5pbmcgaW4gSlNET00gKEplc3QpLCBvZmZzZXQtcHJvcGVydGllcyBhbmQgY2xpZW50IHJlY3RzIGFyZSBhbHdheXMgcmVwb3J0ZWQgYXMgMFxuICAgIC8vIC0gaGVuY2UsIGxldCdzIHRha2UgYSBtb3JlIFwibmFpdmVcIiBhcHByb2FjaCBoZXJlLiAoaHR0cHM6Ly9naXRodWIuY29tL2pzZG9tL2pzZG9tL2lzc3Vlcy8xMzUpXG4gICAgaGlkZGVuV2hlbi5zaGlmdCgpO1xuICB9XG5cbiAgd2hpbGUgKGVsKSB7XG4gICAgaWYgKGVsID09PSBkb2N1bWVudCkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgaWYgKGhpZGRlbldoZW4uc29tZSgocnVsZSkgPT4gcnVsZShlbCkpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBlbCA9IGVsLnBhcmVudE5vZGU7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogSGlkZGVuIGVsZW1lbnRzIGFyZSBlbGVtZW50cyB0aGF0IGhhdmU6XG4gKiAxLiBEaXNwbGF5IHByb3BlcnR5IHNldCB0byBcIm5vbmVcIlxuICogMi4gV2lkdGggYW5kIGhlaWdodCBzZXQgdG8gMFxuICogMy4gQSBoaWRkZW4gcGFyZW50IGVsZW1lbnQgKHRoaXMgYWxzbyBoaWRlcyBjaGlsZCBlbGVtZW50cylcbiAqIDQuIFR5cGUgZXF1YWwgdG8gXCJoaWRkZW5cIiAob25seSBmb3IgZm9ybSBlbGVtZW50cylcbiAqIDUuIEEgXCJoaWRkZW5cIiBhdHRyaWJ1dGVcbiAqXG4gKiBleHBlY3QoJ2RpdicpLnRvQmVIaWRkZW4oKTtcbiAqXG4gKi9cbmV4cG9ydCBjb25zdCB0b0JlSGlkZGVuID0gY29tcGFyYXRvcigoZWwpID0+IHtcbiAgY29uc3QgcGFzcyA9IGlzSGlkZGVuKGVsKTtcbiAgY29uc3QgbWVzc2FnZSA9ICgpID0+IGBFeHBlY3RlZCBlbGVtZW50JHtwYXNzID8gJyBub3QnIDogJyd9IHRvIGJlIGhpZGRlbmA7XG5cbiAgcmV0dXJuIHsgcGFzcywgbWVzc2FnZSB9O1xufSk7XG5cbi8qKlxuICogVGhlIDpzZWxlY3RlZCBzZWxlY3RvciBzZWxlY3RzIG9wdGlvbiBlbGVtZW50cyB0aGF0IGFyZSBwcmUtc2VsZWN0ZWQuXG4gKlxuICogZXhwZWN0KCdkaXYnKS50b0JlU2VsZWN0ZWQoKTtcbiAqXG4gKi9cbmV4cG9ydCBjb25zdCB0b0JlU2VsZWN0ZWQgPSBjb21wYXJhdG9yKChlbCkgPT4ge1xuICBjb25zdCBwYXNzID0gJChlbCkuaXMoJzpzZWxlY3RlZCcpO1xuICBjb25zdCBtZXNzYWdlID0gKCkgPT4gYEV4cGVjdGVkIGVsZW1lbnQke3Bhc3MgPyAnIG5vdCcgOiAnJ30gdG8gYmUgc2VsZWN0ZWRgO1xuXG4gIHJldHVybiB7IHBhc3MsIG1lc3NhZ2UgfTtcbn0pO1xuXG4vKipcbiAqIEhpZGRlbiBlbGVtZW50cyBhcmUgZWxlbWVudHMgdGhhdCBoYXZlOlxuICogMS4gRGlzcGxheSBwcm9wZXJ0eSBzZXQgdG8gXCJub25lXCJcbiAqIDIuIFdpZHRoIGFuZCBoZWlnaHQgc2V0IHRvIDBcbiAqIDMuIEEgaGlkZGVuIHBhcmVudCBlbGVtZW50ICh0aGlzIGFsc28gaGlkZXMgY2hpbGQgZWxlbWVudHMpXG4gKiA0LiBUeXBlIGVxdWFsIHRvIFwiaGlkZGVuXCIgKG9ubHkgZm9yIGZvcm0gZWxlbWVudHMpXG4gKiA1LiBBIFwiaGlkZGVuXCIgYXR0cmlidXRlXG4gKlxuICogZXhwZWN0KCdkaXYnKS50b0JlVmlzaWJsZSgpO1xuICpcbiAqL1xuZXhwb3J0IGNvbnN0IHRvQmVWaXNpYmxlID0gY29tcGFyYXRvcigoZWwpID0+IHtcbiAgY29uc3QgcGFzcyA9ICFpc0hpZGRlbihlbCk7XG5cbiAgY29uc3QgbWVzc2FnZSA9ICgpID0+IGBFeHBlY3RlZCBlbGVtZW50JHtwYXNzID8gJyBub3QnIDogJyd9IHRvIGJlIHZpc2libGVgO1xuXG4gIHJldHVybiB7IHBhc3MsIG1lc3NhZ2UgfTtcbn0pO1xuXG4vKipcbiAqIFRoZSA6Zm9jdXMgc2VsZWN0b3Igc2VsZWN0cyB0aGUgZWxlbWVudCB0aGF0IGN1cnJlbnRseSBoYXMgZm9jdXMuXG4gKlxuICogZXhwZWN0KCdpbnB1dCcpLnRvQmVGb2N1c2VkKCk7XG4gKi9cbmV4cG9ydCBjb25zdCB0b0JlRm9jdXNlZCA9IGNvbXBhcmF0b3IoKGVsKSA9PiB7XG4gIGNvbnN0IGVsZW1lbnQgPSAkKGVsKS5nZXQoMCk7XG4gIGNvbnN0IHBhc3MgPSBlbGVtZW50ID09PSBlbGVtZW50Lm93bmVyRG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgY29uc3QgbWVzc2FnZSA9ICgpID0+IGBFeHBlY3RlZCBlbGVtZW50JHtwYXNzID8gJyBub3QnIDogJyd9IHRvIGJlIGZvY3VzZWRgO1xuXG4gIHJldHVybiB7IHBhc3MsIG1lc3NhZ2UgfTtcbn0pO1xuXG4vKipcbiAqIENoZWNrIHRvIHNlZSBpZiB0aGUgc2V0IG9mIG1hdGNoZWQgZWxlbWVudHMgbWF0Y2hlcyB0aGUgZ2l2ZW4gc2VsZWN0b3JcbiAqIHJldHVybnMgdHJ1ZSBpZiB0aGUgZG9tIGNvbnRhaW5zIHRoZSBlbGVtZW50XG4gKlxuICogZXhwZWN0KCdkaXYnKS50b0JlTWF0Y2hlZEJ5KCcuanMtc29tZXRoaW5nJylcbiAqL1xuZXhwb3J0IGNvbnN0IHRvQmVNYXRjaGVkQnkgPSBjb21wYXJhdG9yKChlbCwgZXhwZWN0ZWQpID0+IHtcbiAgY29uc3QgYWN0dWFsID0gJChlbCkuZmlsdGVyKGV4cGVjdGVkKS5sZW5ndGg7XG4gIGNvbnN0IHBhc3MgPSBhY3R1YWwgPiAwO1xuICBjb25zdCBtZXNzYWdlID0gKCkgPT4gYEV4cGVjdGVkIGVsZW1lbnQke3Bhc3MgPyAnIG5vdCcgOiAnJ30gdG8gYmUgbWF0Y2hlZCBieSAnJHtleHBlY3RlZH0nYDtcblxuICByZXR1cm4geyBwYXNzLCBtZXNzYWdlIH07XG59KTtcblxuLyoqXG4gKlxuICogZXhwZWN0KCdkaXYnKS50b0hhdmVEZXNjZW5kYW50KCcuY2hpbGQnKVxuICovXG5leHBvcnQgY29uc3QgdG9IYXZlRGVzY2VuZGFudCA9IGNvbXBhcmF0b3IoKGVsLCBzZWxlY3RvcikgPT4ge1xuICBjb25zdCBhY3R1YWwgPSAkKGVsKS5maW5kKHNlbGVjdG9yKS5sZW5ndGg7XG4gIGNvbnN0IHBhc3MgPSBhY3R1YWwgPiAwO1xuICBjb25zdCBtZXNzYWdlID0gKCkgPT4gYEV4cGVjdGVkIGVsZW1lbnQke3Bhc3MgPyAnIG5vdCcgOiAnJ30gdG8gY29udGFpbiBjaGlsZCAnJHtzZWxlY3Rvcn0nYDtcblxuICByZXR1cm4geyBwYXNzLCBtZXNzYWdlIH07XG59KTtcblxuLyoqXG4gKlxuICogZXhwZWN0KCdkaXYnKS50b0hhdmVEZXNjZW5kYW50V2l0aFRleHQoe3NlbGVjdG9yOiAnLmNoaWxkJywgdGV4dDogJ3RleHQnfSlcbiAqL1xuZXhwb3J0IGNvbnN0IHRvSGF2ZURlc2NlbmRhbnRXaXRoVGV4dCA9IGNvbXBhcmF0b3IoKGVsLCB7IHNlbGVjdG9yLCB0ZXh0IH0pID0+IHtcbiAgY29uc3QgYWN0dWFsID0gJC50cmltKCQoZWwpLmZpbmQoc2VsZWN0b3IpLnRleHQoKSk7XG4gIGlmICh0ZXh0ICYmICQuaXNGdW5jdGlvbih0ZXh0LnRlc3QpKSB7XG4gICAgY29uc3QgcGFzcyA9IHRleHQudGVzdChhY3R1YWwpO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSAoKSA9PlxuICAgICAgYEV4cGVjdGVkIGVsZW1lbnQke3Bhc3MgPyAnIG5vdCcgOiAnJ30gdG8gaGF2ZSBkZXNjZW5kYW50ICcke3NlbGVjdG9yfScgd2l0aCB0ZXh0IG1hdGNoaW5nICcke3RleHR9JyxgICsgYCBidXQgaGFkICcke2FjdHVhbH0nYDtcblxuICAgIHJldHVybiB7IHBhc3MsIG1lc3NhZ2UgfTtcbiAgfVxuICBjb25zdCBwYXNzID0gYWN0dWFsLmluZGV4T2YodGV4dCkgIT09IC0xO1xuICBjb25zdCBtZXNzYWdlID0gKCkgPT4gYEV4cGVjdGVkIGVsZW1lbnQke3Bhc3MgPyAnIG5vdCcgOiAnJ30gdG8gaGF2ZSBkZXNjZW5kYW50ICcke3NlbGVjdG9yfScgd2l0aCB0ZXh0ICcke3RleHR9JywgYnV0IGhhZCAnJHthY3R1YWx9J2A7XG5cbiAgcmV0dXJuIHsgcGFzcywgbWVzc2FnZSB9O1xufSk7XG5cbmV4cG9ydCBjb25zdCB0b0hhdmVTZWxlY3RlZE9wdGlvbnMgPSBjb21wYXJhdG9yKChlbCwgZXhwZWN0ZWQpID0+IHtcbiAgaWYgKGV4cGVjdGVkIGluc3RhbmNlb2YgSFRNTE9wdGlvbkVsZW1lbnQpIHtcbiAgICBjb25zdCBhY3R1YWwgPSAkKGVsKS5maW5kKCc6c2VsZWN0ZWQnKTtcblxuICAgIGNvbnN0IHBhc3MgPSBhY3R1YWwuaXMoJChleHBlY3RlZCkpO1xuXG4gICAgY29uc3QgbWVzc2FnZSA9ICgpID0+XG4gICAgICBgRXhwZWN0ZWQgZWxlbWVudCR7cGFzcyA/ICcgbm90JyA6ICcnfSB0byBoYXZlIG9wdGlvbnMgJ1ske2V4cGVjdGVkLm91dGVySFRNTH1dJyBidXQgaGFkICdbJHthY3R1YWxbMF0ub3V0ZXJIVE1MfV0nYDtcblxuICAgIHJldHVybiB7IHBhc3MsIG1lc3NhZ2UgfTtcbiAgfVxuXG4gIGlmIChpc0hUTUxPcHRpb25FbGVtZW50QXJyYXkoZXhwZWN0ZWQpKSB7XG4gICAgY29uc3QgYWN0dWFsID0gJChlbCkuZmluZCgnOnNlbGVjdGVkJyk7XG5cbiAgICBjb25zdCBwYXNzID0gYWN0dWFsLmxlbmd0aCA9PT0gZXhwZWN0ZWQubGVuZ3RoICYmIGFjdHVhbC50b0FycmF5KCkuZXZlcnkoKF8sIGluZGV4KSA9PiAkKGFjdHVhbFtpbmRleF0pLmlzKGV4cGVjdGVkW2luZGV4XSkpO1xuXG4gICAgY29uc3QgZXhwZWN0ZWRPcHRpb25zU3RyaW5nID0gJChleHBlY3RlZClcbiAgICAgIC5nZXQoKVxuICAgICAgLm1hcCgob3B0aW9uKSA9PiBvcHRpb24ub3V0ZXJIVE1MKVxuICAgICAgLmpvaW4oJywnKTtcblxuICAgIGNvbnN0IGFjdHVhbE9wdGlvbnNTdHJpbmcgPSBhY3R1YWxcbiAgICAgIC5nZXQoKVxuICAgICAgLm1hcCgob3B0aW9uKSA9PiBvcHRpb24ub3V0ZXJIVE1MKVxuICAgICAgLmpvaW4oJywnKTtcblxuICAgIGNvbnN0IG1lc3NhZ2UgPSAoKSA9PlxuICAgICAgYEV4cGVjdGVkIGVsZW1lbnQke3Bhc3MgPyAnIG5vdCcgOiAnJ30gdG8gaGF2ZSBvcHRpb25zICdbJHtleHBlY3RlZE9wdGlvbnNTdHJpbmd9XScgYnV0IGhhZCAnWyR7YWN0dWFsT3B0aW9uc1N0cmluZ31dJ2A7XG5cbiAgICByZXR1cm4geyBwYXNzLCBtZXNzYWdlIH07XG4gIH1cblxuICBjb25zdCBhY3R1YWw6IHN0cmluZ1tdID0gJChlbCkudmFsKCk7XG5cbiAgY29uc3QgcGFzcyA9IGNvZXJjZUFycmF5KGV4cGVjdGVkKT8uZXZlcnkoKHYpID0+IGFjdHVhbC5pbmNsdWRlcyh2KSk7XG5cbiAgY29uc3QgZXhwZWN0ZWRPcHRpb25zU3RyaW5nID0gQXJyYXkuaXNBcnJheShleHBlY3RlZClcbiAgICA/IGV4cGVjdGVkLnJlZHVjZSgoYWNjOiBzdHJpbmcsIHZhbDogc3RyaW5nLCBpKSA9PiBhY2MgKyBgJHtpID09PSBleHBlY3RlZC5sZW5ndGggPyAnJyA6ICcsJ30ke3ZhbH1gKVxuICAgIDogZXhwZWN0ZWQ7XG4gIGNvbnN0IG1lc3NhZ2UgPSAoKSA9PiBgRXhwZWN0ZWQgZWxlbWVudCR7cGFzcyA/ICcgbm90JyA6ICcnfSB0byBoYXZlIG9wdGlvbnMgJ1ske2V4cGVjdGVkT3B0aW9uc1N0cmluZ31dJyBidXQgaGFkICdbJHthY3R1YWx9XSdgO1xuXG4gIHJldHVybiB7IHBhc3MsIG1lc3NhZ2UgfTtcbn0pO1xuIl19